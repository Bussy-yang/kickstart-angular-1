<!doctype html>
<html lang="en" ng-app="Layer2" ng-csp>
<head>
    <title>layer2</title>
    <meta charset="utf-8" />
    <% securityToken(); %>
    <link href='http://data/x-icon;,' rel='shortcut icon' />
    <!-- [if lt ie 9]>
    <script src='lib/html5shiv.js'></script>
    <![endif]-->
    <link rel='stylesheet' type='text/css' href='css/fix.css' />
    <% if (modeIs("debug")) { %>
    <link rel='stylesheet/less' type='text/css' href='css/all.less' />
    <link rel='stylesheet' type='text/css' href='css/bootstrap.css' />
    <% } else {
    %> <link rel='stylesheet' type='text/css' href='css/all.min.css.gz' />
    <% } %>
</head>
<body>
    <header>
        <span class="username ng-cloak" ng-cloak>{{esp.user.name}}</span>
    </header>
    <nav>
        <div class="navbar navbar-inverse">
            <div class="navbar-inner">
                <div class="container-fluid">
                    <ul class="nav pull-right">
                        <!--
                        <li class="dropdown open">
                            <a class="dropdown-toggle">
                                <i class="halflings-icon white warning-sign"></i>
                            </a>
                            <ul class="pull-right dropdown-navbar dropdown-menu dropdown-caret dropdown-closer notifications" ng-show="false">
                                <li><span class="dropdown-menu-title">you have 11 notifcations</span></li>
                                <li><a href="#">" + "<i class="halflings-icon white user"></i>
                                   <span class="message">new user registration</span></li>
                                   <span class="time">1 min</span></li>
                                <li>
                            </ul>
                        </li>
                        <li ng-class="esp.navclass('/service/manage/')" ng-show="Esp.can('edit')"> <a href="#/service/manage/">Manage</a></li>
                        -->
                        <li class="dropdown" ng-class="esp.navclass('/service/user/login/')"> <a ng-controller="UserControl" ng-click="logout()"
                            href="#/service/user/login">{{Esp.getLoginState()}}</a></li>
                    </ul>
                </div>
            </div>
        </div>
    </nav>
    <main>
        <section>
            <div class="row">
                <div class="span2">
                    <div class="nav-collapse sidebar-nav" ng-controller="NavControl">
                        <ul class="nav nav-tabs nav-stacked main-menu" ng-repeat="item in sidenav">
                            <li class="{{item.active}}">
                                <a href="{{item.uri}}">
                                    <!-- are these bootstrap icons -->
                                    <i class="fa-icon-{{item.icon}}"></i>
                                    <span ng-cloak>{{item.name}}</span>
                                </a>
                            </li>
                        </ul>
                    </div>
                </div>
                <div class="span8 offset1">
                    <div ng-view></div>
                </div>
            </div>
        </section>
        <div ng-repeat="(field, msg) in feedback">
            <h1 ng-class="'feedback-' + field" ng-show="feedback" ng-cloak
                ng-animate="{show: 'feedback-show', hide: 'feedback-hide'}">{{msg}}</h1>
        </div>
    </main>
    <!-- [if lt ie 9]>
    <script src='lib/html5shiv.js'></script>
    <![endif]-->
    <% if (modeIs("debug")) { %>
    <script src='lib/angular.js'></script>
    <script src='lib/angular-resource.js'></script>
    <script src='lib/angular-bootstrap.js'></script>
    <script src='lib/ui-bootstrap-tpls.js'></script>
    <script src='lib/less.js'></script>
    <script src='app/main.js'></script>
    <%
    scripts("app/*/**.js,components/**.js");
    } else {
    %> <script src='lib/all.min.js.gz'></script>
    <% } %>
</body>
</html>
